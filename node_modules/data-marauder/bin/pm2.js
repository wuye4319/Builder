const pm2 = require('pm2')
let path = require('path')

class proxy {
  start(script) {
    pm2.connect(function (err) {
      if (err) {
        console.error(err)
        process.exit(2)
      }

      pm2.start({
        script: path.join(__dirname, script),
      }, (err, apps) => {
        pm2.disconnect()
        if (err) { throw err }
      })
    })
  }
}

module.exports = proxy